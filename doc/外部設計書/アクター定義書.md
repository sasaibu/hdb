# アクター定義書

## 1. 文書概要

### 1.1 目的
本文書は、Health Data Bank（HDB）システムの利用者および関連するシステムについて、その役割や属性等を明確にし、ユースケースの抜け漏れがないかを確認することを目的とする。

### 1.2 役割
- アクターの責務毎に区別することで、要求が妥当かつ完全か検証する
- 人間の利用者についてはその特性から使いやすさに関する要求を分析し、UI規約の基礎情報にする

### 1.3 HDBシステム構成概要
HDBシステムは以下の3つのコンポーネントで構成される：
- HDBアプリ（iOS/Android）: 個人利用者向けモバイルアプリケーション
- HDBシステム（Web）: 企業・健保スタッフ向け既存システム
- バイタルAWS: HDBアプリ専用バックエンドシステム

### 1.4 文書の構成
- アクター一覧表
- 各アクターの詳細定義

## 2. アクター一覧表

| アクター名 | 分類 | 概要 | 主要機能 | 利用システム | 特性・制約 |
|----------|------|------|---------|------------|----------|
| ユーザー | 人間アクター | 企業・健保組織に所属する従業員でHDBアプリを利用する個人 | バイタルデータ管理、健康記録、転籍データ移行 | HDBアプリ（iOS/Android） | スマートフォン利用、個人健康データ管理、年齢層20-70代 |
| スタッフ | 人間アクター | 企業・健保組織において従業員の健康管理業務を担当する職員 | 健診管理、通知配信、ストレスチェック・サーベイ実施 | HDBシステム（Web） | 業務時間内利用、健康管理専門知識、労務管理権限 |
| 管理者 | 人間アクター | HDBシステム全体の技術的運用・保守を担当するシステム管理者 | システム設定、運用監視、セキュリティ管理 | バイタルAWS、HDBシステム管理画面 | 高度な技術知識、24時間対応、システム全体責任 |

## 3. アクター詳細定義

### 3.1 ユーザー

#### 基本情報
- アクター名: ユーザー
- 分類: 人間アクター（プライマリアクター）
- 概要: 企業・健保組織に所属する従業員で、HDBアプリを利用して個人の健康データを管理する

#### 責務・役割
- バイタルデータ管理: 歩数、体重、血圧、心拍数、体温、体脂肪率の記録・確認
- 外部連携管理: HealthKit（iOS）、ヘルスコネクト（Android）との連携設定
- プロフィール管理: ニックネーム、アイコン設定
- 通知設定: 健診通知、パルスサーベイ等の受信設定
- データ管理: DBバックアップ・リストア、機種変更時のデータ移行
- 転籍対応: 企業・健保間異動時のデータ移行処理

#### 利用環境・特性
- 利用デバイス: iOS/Androidスマートフォン（React Native製アプリ）
- 利用時間: 24時間（主に朝夕の健康データ記録、通勤時間の確認）
- 年齢層: 20-70代の企業従業員
- ITリテラシー: 初級～中級（年齢・職種により差異）
- 健康意識: 高（企業の健康管理プログラム参加者）
- プライバシー意識: 高（個人の健康データを扱うため）

#### ユーザビリティ要件
- シンプルな操作: 3タップ以内でのデータ入力
- 視認性: 大きな文字・ボタン、高コントラスト
- 直感的なナビゲーション: ハンバーガーメニュー、ナビゲーションバー
- データ可視化: グラフ・チャートでの健康データ表示
- 多世代対応: 高齢者から若年層まで使いやすいUI
- レスポンシブデザイン: 様々な画面サイズへの対応

#### セキュリティ要件
- 認証: 生体認証、パスワード認証
- データ保護: ローカルデータの暗号化、Keychain/Keystore利用
- 通信暗号化: HTTPS通信、API認証トークン管理
- プライバシー保護: 個人特定情報の適切な管理

### 3.2 スタッフ

#### 基本情報
- アクター名: スタッフ
- 分類: 人間アクター（セカンダリアクター）
- 概要: 企業・健保組織において従業員の健康管理業務を担当する職員

#### 責務・役割
- 健診管理: 健診結果の登録・更新、健診未受診者への通知配信
- アンケート・調査: ストレスチェック、パルスサーベイの実施・結果分析
- 通知管理: 従業員への各種お知らせ・通知の配信設定
- データ分析: 組織全体の健康データ分析、レポート作成
- イベント管理: 健康促進イベントの企画・実施・ポイント管理
- 利用者サポート: 従業員からの問い合わせ対応、利用方法指導
- システム設定: 組織固有の設定管理、利用者権限管理

#### 利用環境・特性
- 利用デバイス: PC（Webブラウザ経由でHDBシステム利用）
- 利用時間: 業務時間内（平日9:00-18:00、定時内）
- ITリテラシー: 中級～上級（業務システム操作に慣れている）
- 業務知識: 健康管理、労務管理、産業保健の専門知識
- 権限レベル: 所属組織内従業員データへの限定的アクセス権限
- 役職: 人事部、健康管理室、保健師、産業医等

#### ユーザビリティ要件
- 業務効率性: 大量データの一括処理、CSV一括アップロード
- 分析機能: 集計レポート、グラフ表示、データエクスポート
- 検索・フィルタ: 従業員検索、条件絞り込み、ソート機能
- 作業継続性: 複数タブでの同時作業、下書き保存機能
- 監査対応: 操作履歴確認、変更ログ表示

#### セキュリティ要件
- アクセス制御: 所属組織データのみアクセス可能
- 役割ベース権限: 健診閲覧権限、通知配信権限等の細分化
- 操作ログ: 全操作の記録・監査証跡
- データ保護: 個人情報の適切な取り扱い、画面ロック機能

### 3.3 管理者

#### 基本情報
- アクター名: 管理者
- 分類: 人間アクター（セカンダリアクター）
- 概要: HDBシステム全体（HDBシステム、バイタルAWS）の技術的運用・保守を担当するシステム管理者

#### 責務・役割
- システム運用: HDBシステム、バイタルAWSの稼働監視・障害対応
- ユーザー管理: 企業・健保スタッフのアカウント管理、権限設定
- セキュリティ管理: セキュリティポリシー設定、不正アクセス監視
- データ管理: DBバックアップ・復旧、データ整合性チェック
- システム保守: アプリ・サーバーのアップデート、パッチ適用
- Firebase管理: Remote Config設定、FCM通知設定管理
- 監査・分析: システムログ分析、セキュリティ監査、性能監視

#### 利用環境・特性
- 利用デバイス: PC（管理用Webコンソール）、サーバー端末
- 利用時間: 24時間対応（平日9:00-翌朝8:55分稼働、夜間・休日オンコール）
- ITリテラシー: 上級（AWS、React Native、システム管理の専門知識）
- 権限レベル: システム全体への最高権限
- 責任範囲: システム全体の可用性・セキュリティ・性能
- 組織: 運用チーム、インフラチーム、セキュリティチーム

#### ユーザビリティ要件
- 統合管理画面: HDBシステム・バイタルAWSの一元管理
- リアルタイム監視: システム状態のダッシュボード表示
- アラート機能: 障害・異常の即座の通知
- 自動化ツール: 定期メンテナンス、バックアップの自動実行
- 詳細ログ: システム・セキュリティ・操作ログの統合表示

#### セキュリティ要件
- 多要素認証: 複数回・異なる方式による認証
- 特権アクセス管理: 管理者権限の分離・最小権限原則
- 完全監査ログ: 全管理操作の記録・証跡管理
- 緊急時手順: インシデント対応、災害復旧計画
- 内部統制対応: 企業の既存規定に従った統制対応

## 4. アクター間の関係

### 4.1 ユーザー ⇔ スタッフ
- 通知受信: スタッフからユーザーへの健診通知、パルスサーベイ依頼等の配信
- データ提供: ユーザーのバイタルデータをスタッフが匿名化して分析利用
- サポート: ユーザーからスタッフへの問い合わせ、利用方法相談
- 健診連携: 健診結果の共有、未受診者への督促

### 4.2 スタッフ ⇔ 管理者
- システム利用: スタッフはHDBシステムを利用、管理者が運用・保守
- 権限管理: 管理者がスタッフのアクセス権限・役割を設定
- 障害対応: スタッフからの障害報告、管理者による技術対応
- 機能要求: スタッフからの新機能・改善要求の伝達

### 4.3 ユーザー ⇔ 管理者
- 間接的関係: 直接的な接点は少ない
- 技術サポート: HDBアプリの技術的問題時の最終サポート
- データ管理: ユーザーのデータバックアップ・復旧時の技術支援
- 転籍処理: 企業間異動時のデータ移行技術対応

## 5. 外部システム・アクター

### 5.1 プラットフォーム連携システム
- HealthKit（iOS）: iOSデバイスのヘルスデータ自動取得
- ヘルスコネクト（Android）: Androidデバイスのヘルスデータ自動取得
- Firebase Remote Config: アプリ設定の動的管理
- Firebase Cloud Messaging（FCM）: プッシュ通知配信基盤

#### 5.1.1 ヘルスコネクト/HealthKitデータ形式

##### 5.1.1.1 歩数データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 歩数 | steps_count | Long | stepCount | Double |
| 開始時刻 | start_time | Instant | startDate | Date |
| 終了時刻 | end_time | Instant | endDate | Date |
| データソース | data_origin | String | sourceRevision | String |
| メタデータ | metadata | Metadata | metadata | Dictionary |

##### 5.1.1.2 体重データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 体重 | weight | Mass | bodyMass | HKQuantity |
| 測定時刻 | time | Instant | startDate | Date |
| データソース | data_origin | String | sourceRevision | String |
| メタデータ | metadata | Metadata | metadata | Dictionary |

##### 5.1.1.3 血圧データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 収縮期血圧 | systolic | Pressure | systolic | HKQuantity |
| 拡張期血圧 | diastolic | Pressure | diastolic | HKQuantity |
| 測定時刻 | time | Instant | startDate | Date |
| 測定位置 | body_position | Int | bodyPosition | HKBloodPressureBodyPosition |
| データソース | data_origin | String | sourceRevision | String |

##### 5.1.1.4 心拍数データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 心拍数 | beats_per_minute | Long | heartRate | HKQuantity |
| 測定時刻 | time | Instant | startDate | Date |
| データソース | data_origin | String | sourceRevision | String |
| メタデータ | metadata | Metadata | metadata | Dictionary |

##### 5.1.1.5 体温データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 体温 | temperature | Temperature | bodyTemperature | HKQuantity |
| 測定時刻 | time | Instant | startDate | Date |
| 測定部位 | measurement_location | Int | measurementLocation | HKBodyTemperatureSensorLocation |
| データソース | data_origin | String | sourceRevision | String |

##### 5.1.1.6 体脂肪率データ

| 項目 | Android（ヘルスコネクト） |  | iOS（HealthKit） |  |
|------|--------------------------|--|-----------------|--|
|      | 物理名 | データ型 | 物理名 | データ型 |
| 体脂肪率 | percentage | Percentage | bodyFatPercentage | HKQuantity |
| 測定時刻 | time | Instant | startDate | Date |
| データソース | data_origin | String | sourceRevision | String |
| メタデータ | metadata | Metadata | metadata | Dictionary |

### 5.2 クラウドサービス
- iCloud（iOS）: 同一OS内でのデータバックアップ
- Google Drive（Android）: 同一OS内でのデータバックアップ
- App Store / Google Play: アプリ配信・バージョン管理

### 5.3 バックエンドシステム
- HDBシステム（Web）: 既存の企業・健保向けシステム
- バイタルAWS: HDBアプリ専用のバックエンドAPI
- 認証基盤: Single Sign On（SSO）による統合認証

## 6. 利用シナリオ例

### 6.1 ユーザーの典型的利用パターン
1. 朝の健康データ確認（7:00-8:00）
   - HDBアプリを起動し、昨日の歩数データを確認
   - 体重・血圧を測定し、アプリに入力
   
2. 通勤時間の利用（8:00-9:00、18:00-19:00）
   - 通知確認（健診案内、パルスサーベイ依頼等）
   - 週間・月間の健康データ推移をグラフで確認

3. 転籍時の特別利用
   - 転籍データ移行画面で前職のHDBデータを新しい企業に移行

### 6.2 スタッフの業務パターン
1. 月初業務（1-3日）
   - 前月の健診受診状況確認、未受診者リスト作成
   - 健康促進イベントの企画・参加者募集通知配信

2. 定期業務（週次）
   - ストレスチェック・パルスサーベイの実施状況確認
   - 従業員からの問い合わせ対応、利用方法指導

3. 四半期業務
   - 組織全体の健康データ分析、経営層向けレポート作成

### 6.3 管理者の運用パターン
1. 日常監視（24時間）
   - HDBシステム・バイタルAWSの稼働状況監視
   - 異常アラート対応、障害時の緊急対処

2. 定期メンテナンス（月次）
   - システムアップデート、セキュリティパッチ適用
   - Firebase Remote Config設定更新、アプリ設定調整

## 7. まとめ

本アクター定義書により、HDBシステムの主要なアクターの役割と特性が明確化された。これにより以下の効果が期待される：

1. 要件の網羅性確保: 各アクターの責務を明確にすることで、機能要件の抜け漏れを防止
2. UI/UX設計の指針: 各アクターの特性に応じた使いやすいインターフェース設計
   - ユーザー：直感的なモバイルUI
   - スタッフ：効率的な業務用WebUI  
   - 管理者：詳細な管理用コンソール
3. セキュリティ設計の基盤: アクター毎の権限・アクセス制御要件の明確化
4. テスト設計の基準: アクター毎のテストシナリオ作成の指針

重要なポイント：
- ユーザー、スタッフ、管理者はそれぞれ異なるシステム（HDBアプリ、HDBシステム、管理コンソール）を利用
- 企業・健保組織を中心とした健康管理エコシステムの構築
- 転籍時のデータ移行など、企業特有の要件への対応

今後のシステム開発において、本定義書を参照し、各アクターのニーズに適合したシステム設計を行うこと。

---

作成日: 2025年8月19日  
版数: v1.0  
作成者: システム設計チーム  
承認者: プロジェクトマネージャー